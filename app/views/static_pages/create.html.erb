<% content_for :head do -%>
	
<%= stylesheet_link_tag "lightbox" %>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  .draggable { width: 160px; height: 120px; padding: 0.5em; float: left; margin: 0 10px 10px 0; }
  #draggable, #draggable2 { margin-bottom:20px; }
  #navbar {margin-left: auto; margin-right: auto; }
  #containment-wrapper { width: 120%; height:2000px; border:2px solid #ccc; padding: 10px; }
  #main_container {margin-left: 100px; margin-right: 100px; }
  </style>
  <style type="text/css">
.buttonTest {
	-moz-box-shadow:inset 0px -10px 5px -3px #ccc6cc;
	-webkit-box-shadow:inset 0px -10px 5px -3px #ccc6cc;
	box-shadow:inset 0px -10px 5px -3px #ccc6cc;
	background-color:#c9c1c9;
	-moz-border-radius:12px;
	-webkit-border-radius:12px;
	border-radius:12px;
	border:3px solid #828282;
	display:inline-block;
	color:#080808;
	font-family:Arial;
	font-size:16px;
	font-weight:bold;
	padding:4px 20px;
	text-decoration:none;
	text-shadow:1px 0px 0px #ffffff;
}.buttonTest:hover {
	background-color:#ffffff;
}.buttonTest:active {
	position:relative;
	top:1px;
}
/* This imageless css button was generated by CSSButtonGenerator.com */
</style>
  <script>
  $(function() {
	num = "<%= @files.count %>"
	for (var i=0;i<num;i++) { 
		$("#draggable"+i).draggable( 
			{ snap: true, distance: 20, containment: "#containment-wrapper", scroll: false }	
		);

	}
	});
  </script>
  <script>
	$(function() {
		$('#formsubmit').click(function() {
			//$('#formsubmit').submit();
			for (var i=0;i<num;i++) { 
				$("#Left"+i).val($("#draggable"+i).position().left);
				$("#Top"+i).val($("#draggable"+i).position().top);
				//alert($("#draggable"+i).position().left);	
				//alert($("#Top"+i).val);
			}
			alert("Works");
		});
	});
	  			//$("amount").val(num);
			//for (var i=0;i<num;i++) { 
				//$(i+"top").val($("#draggable"+i).position().top);
				//$(i+"left").val($("#draggable"+i).position().left);
				//$(i+"left").submit;
				//$(i+"top").submit;
				//alert($("#draggable"+i).position().left);	
			//}
  </script>

<% end -%>

<!--
	640 480
		420
	480	360
		300
		240
		180
		130
		120
-->
<div class="section" style = "width: 120%">

<%= form_for(:wordstorm, :html => { :id => 'formsubmit' }, :style => {:display => 'inline-block'}, :url => {:controller => 'sessions', :action => 'profile'}) do |f| %>
	<h2 style = "float:left">
	<span>WordStorm:</span>
	<span><%= f.text_field(:name) %></span>
	<input type="hidden" name="num" value="<%= @files.size%>">
	<% @files.each_with_index do |file, i| %>
		<input type="hidden" name="Left<%=i%>" id = "Left<%=i%>" value="0">
		<input type="hidden" name="Top<%=i%>" id = "Top<%=i%>" value="0">
	<% end %>
	<% f.fields_for :images do |image| %>
      	<span><%= f.text_field(:images) %></span>
    <% end %>
	<span><%= f.submit %></span>
	</h2>
<% end %>


<%= link_to "Save storm", '/profile', class: "buttonTest", :id => "submit", :style => "float:right" %> 
<%=link_to "Link text", '/profile', wordstorm: @wordstorm.name, :method => :post, :style => "float:right" %> 

</div>
<br>
<h2><%= @wordstorm.name %></h2>
<br>
<br>

<div id="containment-wrapper">
	<div class="imageRow">
			<% @files.each_with_index do |file, i| %>
				<a href= "assets/<%= file.to_s.html_safe %>" rel="lightbox">
					<%= image_tag("#{file.to_s.html_safe}", :id => "draggable"+i.to_s, :class => "draggable ui-widget-content") %>
				</a>
			<% end %>
	</div>
</div>

<%= javascript_include_tag "lightbox" %>